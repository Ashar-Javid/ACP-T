<svg xmlns="http://www.w3.org/2000/svg" width="640" height="360" viewBox="0 0 640 360">
  <style>
    .box { fill:#f1f5ff; stroke:#2f4aa0; stroke-width:2; rx:8; ry:8; }
    .arrow { stroke:#2f4aa0; stroke-width:2; marker-end:url(#arrowhead); fill:none; }
    .text { font-family:Arial, sans-serif; font-size:16px; fill:#1c2a48; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="8" markerHeight="8" refX="4" refY="2" orient="auto">
      <polygon points="0 0, 4 2, 0 4" fill="#2f4aa0"/>
    </marker>
  </defs>
  <rect class="box" x="40" y="40" width="180" height="60"/>
  <text class="text" x="130" y="75" text-anchor="middle">Client</text>

  <rect class="box" x="240" y="40" width="180" height="60"/>
  <text class="text" x="330" y="75" text-anchor="middle">Protocol Manager</text>

  <rect class="box" x="440" y="40" width="160" height="60"/>
  <text class="text" x="520" y="70" text-anchor="middle">Registry Lookup</text>

  <rect class="box" x="440" y="160" width="160" height="60"/>
  <text class="text" x="520" y="195" text-anchor="middle">Agent Handler</text>

  <line class="arrow" x1="220" y1="70" x2="240" y2="70"/>
  <text class="text" x="230" y="60" text-anchor="middle">JSON-RPC</text>

  <line class="arrow" x1="420" y1="70" x2="440" y2="70"/>
  <text class="text" x="430" y="60" text-anchor="middle">resolve(id)</text>

  <line class="arrow" x1="520" y1="100" x2="520" y2="160"/>
  <text class="text" x="536" y="130">handler</text>

  <line class="arrow" x1="520" y1="220" x2="330" y2="220"/>
  <text class="text" x="425" y="210" text-anchor="middle">result</text>

  <line class="arrow" x1="330" y1="220" x2="330" y2="100"/>
  <text class="text" x="346" y="160">cid/result</text>

  <line class="arrow" x1="330" y1="100" x2="130" y2="100"/>
  <text class="text" x="230" y="110" text-anchor="middle">JSON-RPC response</text>
</svg>
